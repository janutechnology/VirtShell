# Get hosts
curl -s http://localhost:80/hosts/host-05-pdn | jq .
curl -s http://localhost:80/hosts/ | jq .

# Create a host
curl -X POST http://127.0.0.1:80/hosts/ -d "{\"name\": \"host-05-pdn\", \"os\": \"Ubuntu_14.04_3.5.0-23.x86_64\", \"memory\": \"12GB\"}" -H "accept:application/json" | jq .

# Delete a host
curl -X DELETE http://127.0.0.1:80/hosts/host-05-pdn  | jq .

# Update a host
curl -X PUT http://127.0.0.1:80/hosts/host-05-pdn -d "{\"os\": \"Ubuntu_18.04_3.5.0-23.x86_64\", \"memory\": \"16GB\"}" -H "accept:application/json" | jq .

############################################################################################

# Get users
curl -s http://localhost:80/users/virtshell | jq .
curl -s http://localhost:80/users/ | jq .

# Create a user
curl -X POST http://127.0.0.1:80/users/ -d "{\"username\": \"virtshell\", \"type\": \"administrator\", \"login\": \"user@mail.com\", \"groups\": [{\"name\": \"web_development_team\"}, {\"name\": \"production\"}]}" -H "accept:application/json" | jq .

# Delete a user
curl -X DELETE http://127.0.0.1:80/users/virtshell  | jq .

# Update a user
curl -X PUT http://127.0.0.1:80/users/virtshell -d "{\"login\": \"user@gmail.com\"}" -H "accept:application/json" | jq .

############################################################################################

# Get groups
curl -s http://localhost:80/groups/web_development_team | jq .
curl -s http://localhost:80/groups/ | jq .

# Create a group
curl -X POST http://127.0.0.1:80/groups/ -d "{\"name\": \"web_development_team\", \"users\": [{\"user\": \"virtshell\"}, {\"user\": \"demouser\"}]}" -H "accept:application/json" | jq .

# Delete a group
curl -X DELETE http://127.0.0.1:80/groups/web_development_team  | jq .

# Update a group
curl -X PUT http://127.0.0.1:80/groups/web_development_team -d "{\"users\": [{\"user\": \"virtshell\"}]}" -H "accept:application/json" | jq .

############################################################################################

# Get provisioners
curl -s http://localhost:80/provisioners/backend-services-provisioner | jq .
curl -s http://localhost:80/provisioners/ | jq .

# Create a provisioner
curl -X POST http://127.0.0.1:80/provisioners/ -d "{\"name\": \"backend-services-provisioner\", \"description\": \"Installs-Configures a backend server\", \"version\": \"1.5.8\", \"repository\": \"https://github.com/janutechnology/VirtShell_Provisioners_Examples.git\", \"executor\": \"run1.sh\", \"tag\": \"backend\", \"depends\": []}" -H "accept:application/json" | jq .

# Delete a provisioner
curl -X DELETE http://127.0.0.1:80/provisioners/backend-services-provisioner  | jq .

# Update a provisioner
curl -X PUT http://127.0.0.1:80/provisioners/backend-services-provisioner -d "{\"depends\": [\"database_co\"]}" -H "accept:application/json" | jq .

############################################################################################

# Get Instances
curl -s http://localhost:80/instances/database_01 | jq .
curl -s http://localhost:80/instances/ | jq .

# Create an Instance
curl -X POST http://127.0.0.1:80/instances/ -d "{\"name\": \"transactional_log\", \"memory\": 1024, \"cpus\": 2, \"hdsize\": \"2GB\", \"description\": \"Server transactional only for store logs\", \"enviroment\": \"bigdata_test_01\", \"operating_system\": \"ubuntu_server_14.04.2_amd64\", \"provisioner\": \"all_backend\", \"host_type\": "GeneralPurpose | ComputeOptimized | MemoryOptimized | StorageOptimized",
  "ipv4": "172.16.56.104",
  "ipv6": "FE80:0000:0000:0000:0202:B3FF:FE1E:8329",
  "driver": "lxc | virtualbox | vmware | ec2 | kvm | docker",
  "created": {"at":"1429207233", "by":"92d30f0c-8c9c-11e5-8994-feff819cdc9f"},
  "modified": {"at":"1529207233", "by":"92d31132-8c9c-11e5-8994-feff819cdc9f"}}" -H "accept:application/json" | jq .

# Delete an Instance
curl -X DELETE http://127.0.0.1:80/instances/9420b244-71e5-44ef-80a9-efe6d8aca5e7  | jq .

# Update an Instance
curl -X PUT http://127.0.0.1:80/instances/9420b244-71e5-44ef-80a9-efe6d8aca5e7 -d "{\"login\": \"user@gmail.com\"}" -H "accept:application/json" | jq .

############################################################################################

# Get Enviroments
curl -s http://localhost:80/enviroments/bigdata_test_01 | jq .
curl -s http://localhost:80/enviroments/ | jq .

# Create an Enviroment
curl -X POST http://127.0.0.1:80/enviroments/ -d "{\"name\":\"bigdata_test_01\",\"description\":\"Collection of servers oriented to big data.\",\"users\":[{\"login\":\"backend_user\"},{\"login\":\"guest\"}]}" -H "accept:application/json" | jq .

# Delete an Instance
curl -X DELETE http://127.0.0.1:80/enviroments/bigdata_test_01  | jq .

############################################################################################

# Get Partitions
curl -s http://localhost:80/partitions/development_co | jq .
curl -s http://localhost:80/partitions/ | jq .

# Create a Partition
curl -X POST http://127.0.0.1:80/partitions/ -d "{\"name\":\"development_co\",\"description\":\"Collection of servers oriented to development team in Colombia.\"}" -H "accept:application/json" | jq .

curl -X POST http://127.0.0.1:80/partitions/ -d "{\"name\":\"develotment_pe\",\"description\":\"Collection of servers oriented to development team in Mexico.\"}" -H "accept:application/json" | jq .

# Update an Partition
curl -X PUT http://127.0.0.1:80/partitions/development_mx -d "{\"description\":\"Collection of servers oriented to development team in Mexico DF.\"}" -H "accept:application/json" | jq .

# Delete an Partition
curl -X DELETE http://127.0.0.1:80/partitions/development_co  | jq .

# Add a host
curl -sv -X PUT http://127.0.0.1:80/partition/development_co/host/host-06-pdn | jq .

############################################################################################

# Get hosts
curl -s http://localhost:80/hosts/host-05-pdn | jq .
curl -s http://localhost:80/hosts/ | jq .

# Create a host
curl -X POST http://127.0.0.1:80/hosts/ -d "{\"name\": \"host-01-pdn\", \"os\": \"Ubuntu_14.04_3.5.0-23.x86_64\", \"memory\": \"12GB\", \"partition\":\"development_co\"}" -H "accept:application/json" | jq .

# Delete a host
curl -X DELETE http://127.0.0.1:80/hosts/host-12-pdn  | jq .

# Update a host
curl -X PUT http://127.0.0.1:80/hosts/host-05-pdn -d "{\"os\": \"Ubuntu_18.04_3.5.0-23.x86_64\", \"memory\": \"16GB\"}" -H "accept:application/json" | jq .

############################################################################################

# Get tasks
curl -s http://localhost:80/tasks/status | jq .
curl -s http://localhost:80/tasks/status/pending | jq .
curl -s http://localhost:80/tasks/11ef00f7-d923-47f3-9d62-1a38caf33e62 | jq .
curl -s http://localhost:80/tasks/ | jq .

# Create a new tasks
curl -X POST http://127.0.0.1:80/tasks/ -d "{\"description\": \"clone virtual machine database_01\", \"status\" : \"pending\"}" -H "accept:application/json" | jq .

# Update a task
curl -X PUT http://127.0.0.1:80/tasks/11ef00f7-d923-47f3-9d62-1a38caf33e62 -d "{\"log\": \"Feb 20 10:40:33 Janu dhclient: DHCPREQUEST of 192.168.0.14 on wlan0 to 192.168.0.1 port 67 Feb 20 10:40:33 Janu dhclient: DHCPACK of 192.168.0.14 from 192.168.0.1 Feb 20 10:40:33 Janu dhclient: bound to 192.168.0.14 -- renewal in 1525 seconds.\"}" -H "accept:application/json" | jq .